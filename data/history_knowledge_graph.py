"""
é«˜ä¸­å†å²çŸ¥è¯†å›¾è°±æ•°æ®ç»“æ„
åŸºäºäººæ•™ç‰ˆé«˜ä¸­å†å²æ•™ç§‘ä¹¦ï¼ˆå¿…ä¿®+é€‰æ‹©æ€§å¿…ä¿®ï¼‰
"""

HISTORY_KNOWLEDGE_GRAPH = {
    "modules": [
        {
            "id": "history_ancient_china",
            "name": "ä¸­å›½å¤ä»£å²",
            "description": "ä»ä¸­åæ–‡æ˜èµ·æºåˆ°æ˜æ¸…",
            "icon": "ğŸ›ï¸",
            "periods": [
                {
                    "id": "period_pre_qin",
                    "name": "å…ˆç§¦æ—¶æœŸ",
                    "timeRange": "çº¦å…¬å…ƒå‰2070å¹´-å…¬å…ƒå‰221å¹´",
                    "chapters": [
                        {
                            "id": "chapter_origin",
                            "name": "ç¬¬1è¯¾ ä¸­åæ–‡æ˜çš„èµ·æºä¸æ—©æœŸå›½å®¶",
                            "keywords": ["ç‚é»„éƒ¨è½", "å¤æœ", "å•†æœ", "è¥¿å‘¨", "åˆ†å°åˆ¶", "å®—æ³•åˆ¶"],
                            "events": [
                                {"name": "å¤æœå»ºç«‹", "year": "çº¦å…¬å…ƒå‰2070å¹´", "location": "é»„æ²³æµåŸŸ"},
                                {"name": "å•†æœå»ºç«‹", "year": "çº¦å…¬å…ƒå‰1600å¹´", "location": "é»„æ²³ä¸­ä¸‹æ¸¸"},
                                {"name": "å‘¨æ­¦ç‹ä¼çº£", "year": "çº¦å…¬å…ƒå‰1046å¹´", "location": "ç‰§é‡"}
                            ]
                        },
                        {
                            "id": "chapter_warring_states",
                            "name": "ç¬¬2è¯¾ è¯¸ä¾¯çº·äº‰ä¸å˜æ³•è¿åŠ¨",
                            "keywords": ["æ˜¥ç§‹", "æˆ˜å›½", "ç™¾å®¶äº‰é¸£", "å•†é…å˜æ³•", "é“å™¨", "ç‰›è€•"],
                            "events": [
                                {"name": "æ˜¥ç§‹æ—¶æœŸå¼€å§‹", "year": "å…¬å…ƒå‰770å¹´", "location": "æ´›é˜³"},
                                {"name": "å•†é…å˜æ³•", "year": "å…¬å…ƒå‰356å¹´", "location": "ç§¦å›½"},
                                {"name": "æˆ˜å›½ä¸ƒé›„å¹¶ç«‹", "year": "å…¬å…ƒå‰475å¹´", "location": "ä¸­åŸ"}
                            ]
                        },
                        {
                            "id": "chapter_qin_unification",
                            "name": "ç¬¬3è¯¾ ç§¦ç»Ÿä¸€å¤šæ°‘æ—å°å»ºå›½å®¶çš„å»ºç«‹",
                            "keywords": ["ç§¦å§‹çš‡", "ä¸­å¤®é›†æƒ", "éƒ¡å¿åˆ¶", "ç»Ÿä¸€æ–‡å­—", "ç»Ÿä¸€è´§å¸", "ä¸‡é‡Œé•¿åŸ"],
                            "events": [
                                {"name": "ç§¦ç»Ÿä¸€å…­å›½", "year": "å…¬å…ƒå‰221å¹´", "location": "å’¸é˜³"},
                                {"name": "ç„šä¹¦å‘å„’", "year": "å…¬å…ƒå‰213å¹´", "location": "å’¸é˜³"},
                                {"name": "ç§¦æœç­äº¡", "year": "å…¬å…ƒå‰206å¹´", "location": "å’¸é˜³"}
                            ]
                        }
                    ]
                },
                {
                    "id": "period_han",
                    "name": "ä¸¤æ±‰æ—¶æœŸ",
                    "timeRange": "å…¬å…ƒå‰202å¹´-220å¹´",
                    "chapters": [
                        {
                            "id": "chapter_han_dynasty",
                            "name": "ç¬¬4è¯¾ è¥¿æ±‰ä¸ä¸œæ±‰â€”â€”ç»Ÿä¸€å¤šæ°‘æ—å°å»ºå›½å®¶çš„å·©å›º",
                            "keywords": ["åˆ˜é‚¦", "æ–‡æ™¯ä¹‹æ²»", "æ±‰æ­¦å¸", "æ¨æ©ä»¤", "ä¸ç»¸ä¹‹è·¯", "å¯Ÿä¸¾åˆ¶"],
                            "events": [
                                {"name": "è¥¿æ±‰å»ºç«‹", "year": "å…¬å…ƒå‰202å¹´", "location": "é•¿å®‰"},
                                {"name": "å¼ éªé€šè¥¿åŸŸ", "year": "å…¬å…ƒå‰138å¹´", "location": "é•¿å®‰-è¥¿åŸŸ"},
                                {"name": "ä¸œæ±‰å»ºç«‹", "year": "25å¹´", "location": "æ´›é˜³"}
                            ]
                        }
                    ]
                },
                {
                    "id": "period_wei_jin",
                    "name": "é­æ™‹å—åŒ—æœ",
                    "timeRange": "220å¹´-589å¹´",
                    "chapters": [
                        {
                            "id": "chapter_three_kingdoms",
                            "name": "ç¬¬5è¯¾ ä¸‰å›½ä¸¤æ™‹å—åŒ—æœçš„æ”¿æƒæ›´è¿­ä¸æ°‘æ—äº¤è",
                            "keywords": ["ä¸‰å›½é¼ç«‹", "æ·æ°´ä¹‹æˆ˜", "åŒ—é­å­æ–‡å¸æ”¹é©", "æ°‘æ—èåˆ", "ä¹å“ä¸­æ­£åˆ¶"],
                            "events": [
                                {"name": "èµ¤å£ä¹‹æˆ˜", "year": "208å¹´", "location": "èµ¤å£"},
                                {"name": "ä¸‰å›½é¼ç«‹", "year": "220å¹´", "location": "ä¸­å›½"},
                                {"name": "æ·æ°´ä¹‹æˆ˜", "year": "383å¹´", "location": "æ·æ°´"}
                            ]
                        }
                    ]
                },
                {
                    "id": "period_sui_tang",
                    "name": "éš‹å”æ—¶æœŸ",
                    "timeRange": "581å¹´-907å¹´",
                    "chapters": [
                        {
                            "id": "chapter_sui_tang_prosperity",
                            "name": "ç¬¬6è¯¾ ä»éš‹å”ç››ä¸–åˆ°äº”ä»£åå›½",
                            "keywords": ["éš‹æœç»Ÿä¸€", "å¤§è¿æ²³", "ç§‘ä¸¾åˆ¶", "è´è§‚ä¹‹æ²»", "å¼€å…ƒç››ä¸–", "å®‰å²ä¹‹ä¹±"],
                            "events": [
                                {"name": "éš‹æœç»Ÿä¸€", "year": "581å¹´", "location": "é•¿å®‰"},
                                {"name": "å¤§è¿æ²³å¼€å‡¿", "year": "605å¹´", "location": "æ´›é˜³"},
                                {"name": "ç„æ­¦é—¨ä¹‹å˜", "year": "626å¹´", "location": "é•¿å®‰"},
                                {"name": "å®‰å²ä¹‹ä¹±", "year": "755å¹´", "location": "èŒƒé˜³"}
                            ]
                        },
                        {
                            "id": "chapter_sui_tang_system",
                            "name": "ç¬¬7è¯¾ éš‹å”åˆ¶åº¦çš„å˜åŒ–ä¸åˆ›æ–°",
                            "keywords": ["ä¸‰çœå…­éƒ¨åˆ¶", "ç§‘ä¸¾åˆ¶", "å‡ç”°åˆ¶", "ç§Ÿåº¸è°ƒåˆ¶", "ä¸¤ç¨æ³•"],
                            "events": []
                        }
                    ]
                },
                {
                    "id": "period_song_yuan",
                    "name": "å®‹å…ƒæ—¶æœŸ",
                    "timeRange": "960å¹´-1368å¹´",
                    "chapters": [
                        {
                            "id": "chapter_song_politics",
                            "name": "ç¬¬9è¯¾ ä¸¤å®‹çš„æ”¿æ²»å’Œå†›äº‹",
                            "keywords": ["å®‹å¤ªç¥–", "æ¯é…’é‡Šå…µæƒ", "ç‹å®‰çŸ³å˜æ³•", "æ¾¶æ¸Šä¹‹ç›Ÿ", "é–åº·ä¹‹å˜"],
                            "events": [
                                {"name": "åŒ—å®‹å»ºç«‹", "year": "960å¹´", "location": "å¼€å°"},
                                {"name": "æ¾¶æ¸Šä¹‹ç›Ÿ", "year": "1005å¹´", "location": "æ¾¶å·"},
                                {"name": "ç‹å®‰çŸ³å˜æ³•", "year": "1069å¹´", "location": "å¼€å°"},
                                {"name": "é–åº·ä¹‹å˜", "year": "1127å¹´", "location": "å¼€å°"}
                            ]
                        },
                        {
                            "id": "chapter_yuan_rule",
                            "name": "ç¬¬10è¯¾ è¾½å¤é‡‘å…ƒçš„ç»Ÿæ²»",
                            "keywords": ["å¥‘ä¸¹", "è¥¿å¤", "å¥³çœŸ", "è’™å¤", "æˆå‰æ€æ±—", "å¿½å¿…çƒˆ", "è¡Œçœåˆ¶"],
                            "events": [
                                {"name": "å…ƒæœå»ºç«‹", "year": "1271å¹´", "location": "å¤§éƒ½"},
                                {"name": "å…ƒæœç»Ÿä¸€", "year": "1279å¹´", "location": "å´–å±±"}
                            ]
                        }
                    ]
                },
                {
                    "id": "period_ming_qing",
                    "name": "æ˜æ¸…æ—¶æœŸ",
                    "timeRange": "1368å¹´-1840å¹´",
                    "chapters": [
                        {
                            "id": "chapter_ming_founding",
                            "name": "ç¬¬12è¯¾ ä»æ˜æœå»ºç«‹åˆ°æ¸…å†›å…¥å…³",
                            "keywords": ["æœ±å…ƒç’‹", "éƒ‘å’Œä¸‹è¥¿æ´‹", "æˆšç»§å…‰æŠ—å€­", "åŠªå°”å“ˆèµ¤", "æ¸…å†›å…¥å…³"],
                            "events": [
                                {"name": "æ˜æœå»ºç«‹", "year": "1368å¹´", "location": "å—äº¬"},
                                {"name": "éƒ‘å’Œä¸‹è¥¿æ´‹", "year": "1405å¹´", "location": "å—äº¬-å°åº¦æ´‹"},
                                {"name": "æ¸…æœå»ºç«‹", "year": "1636å¹´", "location": "ç››äº¬"},
                                {"name": "æ¸…å†›å…¥å…³", "year": "1644å¹´", "location": "å±±æµ·å…³"}
                            ]
                        },
                        {
                            "id": "chapter_qing_prosperity",
                            "name": "ç¬¬13è¯¾ æ¸…æœå‰ä¸­æœŸçš„é¼ç››ä¸å±æœº",
                            "keywords": ["åº·ç†™", "é›æ­£", "ä¹¾éš†", "æ–‡å­—ç‹±", "é—­å…³é”å›½", "å†›æœºå¤„"],
                            "events": [
                                {"name": "åº·ç†™äº²æ”¿", "year": "1667å¹´", "location": "åŒ—äº¬"},
                                {"name": "æ”¶å¤å°æ¹¾", "year": "1683å¹´", "location": "å°æ¹¾"},
                                {"name": "é›…å…‹è¨ä¹‹æˆ˜", "year": "1685å¹´", "location": "é›…å…‹è¨"}
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "id": "history_modern_china",
            "name": "ä¸­å›½è¿‘ä»£å²",
            "description": "ä»é¸¦ç‰‡æˆ˜äº‰åˆ°æ–°ä¸­å›½æˆç«‹",
            "icon": "âš”ï¸",
            "periods": [
                {
                    "id": "period_late_qing",
                    "name": "æ™šæ¸…æ—¶æœŸ",
                    "timeRange": "1840å¹´-1911å¹´",
                    "chapters": [
                        {
                            "id": "chapter_opium_wars",
                            "name": "ç¬¬15è¯¾ ä¸¤æ¬¡é¸¦ç‰‡æˆ˜äº‰",
                            "keywords": ["é¸¦ç‰‡æˆ˜äº‰", "å—äº¬æ¡çº¦", "ç¬¬äºŒæ¬¡é¸¦ç‰‡æˆ˜äº‰", "ç«çƒ§åœ†æ˜å›­", "ä¸å¹³ç­‰æ¡çº¦"],
                            "events": [
                                {"name": "ç¬¬ä¸€æ¬¡é¸¦ç‰‡æˆ˜äº‰", "year": "1840å¹´", "location": "å¹¿ä¸œ"},
                                {"name": "å—äº¬æ¡çº¦", "year": "1842å¹´", "location": "å—äº¬"},
                                {"name": "ç¬¬äºŒæ¬¡é¸¦ç‰‡æˆ˜äº‰", "year": "1856å¹´", "location": "å¹¿ä¸œ"},
                                {"name": "ç«çƒ§åœ†æ˜å›­", "year": "1860å¹´", "location": "åŒ—äº¬"}
                            ]
                        },
                        {
                            "id": "chapter_reform_movement",
                            "name": "ç¬¬16è¯¾ å›½å®¶å‡ºè·¯çš„æ¢ç´¢ä¸åˆ—å¼ºä¾µç•¥çš„åŠ å‰§",
                            "keywords": ["æ´‹åŠ¡è¿åŠ¨", "ç”²åˆæˆ˜äº‰", "æˆŠæˆŒå˜æ³•", "ä¹‰å’Œå›¢è¿åŠ¨", "å…«å›½è”å†›"],
                            "events": [
                                {"name": "æ´‹åŠ¡è¿åŠ¨å¼€å§‹", "year": "1861å¹´", "location": "ä¸­å›½"},
                                {"name": "ç”²åˆæˆ˜äº‰", "year": "1894å¹´", "location": "æœé²œã€è¾½ä¸œ"},
                                {"name": "æˆŠæˆŒå˜æ³•", "year": "1898å¹´", "location": "åŒ—äº¬"},
                                {"name": "å…«å›½è”å†›ä¾µå", "year": "1900å¹´", "location": "åŒ—äº¬"}
                            ]
                        },
                        {
                            "id": "chapter_salvation_struggles",
                            "name": "ç¬¬17è¯¾ æŒ½æ•‘æ°‘æ—å±äº¡çš„æ–—äº‰",
                            "keywords": ["å¤ªå¹³å¤©å›½", "ä¹‰å’Œå›¢", "æ¸…æœ«æ–°æ”¿", "ç«‹å®ªè¿åŠ¨"],
                            "events": [
                                {"name": "é‡‘ç”°èµ·ä¹‰", "year": "1851å¹´", "location": "å¹¿è¥¿"},
                                {"name": "å¤©äº¬äº‹å˜", "year": "1856å¹´", "location": "å¤©äº¬"}
                            ]
                        }
                    ]
                },
                {
                    "id": "period_republic",
                    "name": "æ°‘å›½æ—¶æœŸ",
                    "timeRange": "1912å¹´-1949å¹´",
                    "chapters": [
                        {
                            "id": "chapter_xinhai_revolution",
                            "name": "ç¬¬18è¯¾ è¾›äº¥é©å‘½",
                            "keywords": ["å­™ä¸­å±±", "æ­¦æ˜Œèµ·ä¹‰", "ä¸­åæ°‘å›½", "ä¸‰æ°‘ä¸»ä¹‰", "è¢ä¸–å‡¯"],
                            "events": [
                                {"name": "æ­¦æ˜Œèµ·ä¹‰", "year": "1911å¹´", "location": "æ­¦æ˜Œ"},
                                {"name": "ä¸­åæ°‘å›½æˆç«‹", "year": "1912å¹´", "location": "å—äº¬"},
                                {"name": "è¢ä¸–å‡¯ç§°å¸", "year": "1915å¹´", "location": "åŒ—äº¬"}
                            ]
                        },
                        {
                            "id": "chapter_warlord_era",
                            "name": "ç¬¬19è¯¾ åŒ—æ´‹å†›é˜€ç»Ÿæ²»æ—¶æœŸçš„æ”¿æ²»ã€ç»æµä¸æ–‡åŒ–",
                            "keywords": ["åŒ—æ´‹å†›é˜€", "æŠ¤å›½è¿åŠ¨", "æŠ¤æ³•è¿åŠ¨", "æ–°æ–‡åŒ–è¿åŠ¨"],
                            "events": [
                                {"name": "æ–°æ–‡åŒ–è¿åŠ¨", "year": "1915å¹´", "location": "åŒ—äº¬"}
                            ]
                        },
                        {
                            "id": "chapter_may_fourth",
                            "name": "ç¬¬20è¯¾ äº”å››è¿åŠ¨ä¸ä¸­å›½å…±äº§å…šçš„è¯ç”Ÿ",
                            "keywords": ["äº”å››è¿åŠ¨", "é©¬å…‹æ€ä¸»ä¹‰ä¼ æ’­", "ä¸­å…±ä¸€å¤§", "ä¸­å›½å…±äº§å…š"],
                            "events": [
                                {"name": "äº”å››è¿åŠ¨", "year": "1919å¹´", "location": "åŒ—äº¬"},
                                {"name": "ä¸­å…±ä¸€å¤§", "year": "1921å¹´", "location": "ä¸Šæµ·"}
                            ]
                        },
                        {
                            "id": "chapter_nanjing_government",
                            "name": "ç¬¬21è¯¾ å—äº¬å›½æ°‘æ”¿åºœçš„ç»Ÿæ²»å’Œä¸­å›½å…±äº§å…šå¼€è¾Ÿé©å‘½æ–°é“è·¯",
                            "keywords": ["å›½æ°‘é©å‘½", "åŒ—ä¼æˆ˜äº‰", "å—äº¬å›½æ°‘æ”¿åºœ", "äº•å†ˆå±±", "é•¿å¾"],
                            "events": [
                                {"name": "åŒ—ä¼æˆ˜äº‰", "year": "1926å¹´", "location": "å¹¿å·"},
                                {"name": "å—æ˜Œèµ·ä¹‰", "year": "1927å¹´", "location": "å—æ˜Œ"},
                                {"name": "äº•å†ˆå±±é©å‘½æ ¹æ®åœ°", "year": "1927å¹´", "location": "äº•å†ˆå±±"},
                                {"name": "é•¿å¾", "year": "1934å¹´", "location": "æ±Ÿè¥¿"}
                            ]
                        },
                        {
                            "id": "chapter_war_resistance",
                            "name": "ç¬¬22-23è¯¾ æŠ—æ—¥æˆ˜äº‰",
                            "keywords": ["ä¹ä¸€å…«äº‹å˜", "è¥¿å®‰äº‹å˜", "ä¸ƒä¸ƒäº‹å˜", "æ·æ²ªä¼šæˆ˜", "å—äº¬å¤§å± æ€", "ç™¾å›¢å¤§æˆ˜"],
                            "events": [
                                {"name": "ä¹ä¸€å…«äº‹å˜", "year": "1931å¹´", "location": "æ²ˆé˜³"},
                                {"name": "è¥¿å®‰äº‹å˜", "year": "1936å¹´", "location": "è¥¿å®‰"},
                                {"name": "ä¸ƒä¸ƒäº‹å˜", "year": "1937å¹´", "location": "åŒ—äº¬"},
                                {"name": "å—äº¬å¤§å± æ€", "year": "1937å¹´", "location": "å—äº¬"},
                                {"name": "æŠ—æˆ˜èƒœåˆ©", "year": "1945å¹´", "location": "ä¸­å›½"}
                            ]
                        },
                        {
                            "id": "chapter_liberation_war",
                            "name": "ç¬¬24è¯¾ äººæ°‘è§£æ”¾æˆ˜äº‰",
                            "keywords": ["å†…æˆ˜", "ä¸‰å¤§æˆ˜å½¹", "æ¸¡æ±Ÿæˆ˜å½¹", "å—äº¬è§£æ”¾"],
                            "events": [
                                {"name": "è¾½æ²ˆæˆ˜å½¹", "year": "1948å¹´", "location": "ä¸œåŒ—"},
                                {"name": "æ·®æµ·æˆ˜å½¹", "year": "1948å¹´", "location": "å¾å·"},
                                {"name": "å¹³æ´¥æˆ˜å½¹", "year": "1948å¹´", "location": "åŒ—äº¬"},
                                {"name": "æ¸¡æ±Ÿæˆ˜å½¹", "year": "1949å¹´", "location": "é•¿æ±Ÿ"}
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "id": "history_contemporary_china",
            "name": "ä¸­å›½ç°ä»£å²",
            "description": "æ–°ä¸­å›½æˆç«‹è‡³ä»Š",
            "icon": "ğŸ‡¨ğŸ‡³",
            "periods": [
                {
                    "id": "period_founding",
                    "name": "æ–°ä¸­å›½æˆç«‹å’Œç¤¾ä¼šä¸»ä¹‰å»ºè®¾",
                    "timeRange": "1949å¹´-1978å¹´",
                    "chapters": [
                        {
                            "id": "chapter_prc_founding",
                            "name": "ç¬¬25è¯¾ ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹å’Œå‘ç¤¾ä¼šä¸»ä¹‰çš„è¿‡æ¸¡",
                            "keywords": ["å¼€å›½å¤§å…¸", "æŠ—ç¾æ´æœ", "åœŸåœ°æ”¹é©", "ä¸‰å¤§æ”¹é€ ", "ç¬¬ä¸€ä¸ªäº”å¹´è®¡åˆ’"],
                            "events": [
                                {"name": "ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹", "year": "1949å¹´", "location": "åŒ—äº¬"},
                                {"name": "æŠ—ç¾æ´æœ", "year": "1950å¹´", "location": "æœé²œ"},
                                {"name": "åœŸåœ°æ”¹é©", "year": "1950å¹´", "location": "å…¨å›½"}
                            ]
                        },
                        {
                            "id": "chapter_socialist_construction",
                            "name": "ç¬¬26è¯¾ ç¤¾ä¼šä¸»ä¹‰å»ºè®¾åœ¨æ¢ç´¢ä¸­æ›²æŠ˜å‘å±•",
                            "keywords": ["å¤§è·ƒè¿›", "äººæ°‘å…¬ç¤¾", "æ–‡åŒ–å¤§é©å‘½"],
                            "events": [
                                {"name": "å¤§è·ƒè¿›", "year": "1958å¹´", "location": "å…¨å›½"},
                                {"name": "æ–‡åŒ–å¤§é©å‘½", "year": "1966å¹´", "location": "å…¨å›½"}
                            ]
                        }
                    ]
                },
                {
                    "id": "period_reform",
                    "name": "æ”¹é©å¼€æ”¾æ–°æ—¶æœŸ",
                    "timeRange": "1978å¹´è‡³ä»Š",
                    "chapters": [
                        {
                            "id": "chapter_reform_opening",
                            "name": "ç¬¬27è¯¾ ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„å¼€åˆ›ä¸å‘å±•",
                            "keywords": ["åä¸€å±Šä¸‰ä¸­å…¨ä¼š", "æ”¹é©å¼€æ”¾", "ç»æµç‰¹åŒº", "ä¸€å›½ä¸¤åˆ¶"],
                            "events": [
                                {"name": "åä¸€å±Šä¸‰ä¸­å…¨ä¼š", "year": "1978å¹´", "location": "åŒ—äº¬"},
                                {"name": "æ·±åœ³ç‰¹åŒºæˆç«‹", "year": "1980å¹´", "location": "æ·±åœ³"},
                                {"name": "é¦™æ¸¯å›å½’", "year": "1997å¹´", "location": "é¦™æ¸¯"},
                                {"name": "æ¾³é—¨å›å½’", "year": "1999å¹´", "location": "æ¾³é—¨"}
                            ]
                        },
                        {
                            "id": "chapter_new_era",
                            "name": "ç¬¬29-30è¯¾ ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–°æ—¶ä»£",
                            "keywords": ["åå…«å¤§", "ä¸­å›½æ¢¦", "ä¸€å¸¦ä¸€è·¯", "è„±è´«æ”»åš", "å…¨é¢å°åº·"],
                            "events": [
                                {"name": "åå…«å¤§å¬å¼€", "year": "2012å¹´", "location": "åŒ—äº¬"},
                                {"name": "æå‡ºä¸€å¸¦ä¸€è·¯", "year": "2013å¹´", "location": "å“ˆè¨å…‹æ–¯å¦"}
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "id": "history_world",
            "name": "ä¸–ç•Œå²",
            "description": "å¤ä»£æ–‡æ˜åˆ°å½“ä»£ä¸–ç•Œ",
            "icon": "ğŸŒ",
            "periods": [
                {
                    "id": "period_ancient_world",
                    "name": "å¤ä»£æ–‡æ˜",
                    "timeRange": "çº¦å…¬å…ƒå‰3500å¹´-å…¬å…ƒ476å¹´",
                    "chapters": [
                        {
                            "id": "chapter_ancient_civilizations",
                            "name": "ç¬¬1è¯¾ æ–‡æ˜çš„äº§ç”Ÿä¸æ—©æœŸå‘å±•",
                            "keywords": ["ä¸¤æ²³æµåŸŸ", "å¤åŸƒåŠ", "å¤å°åº¦", "å¤å¸Œè…Š", "å¤ç½—é©¬"],
                            "events": [
                                {"name": "å¤åŸƒåŠç»Ÿä¸€", "year": "çº¦å…¬å…ƒå‰3100å¹´", "location": "å°¼ç½—æ²³æµåŸŸ"},
                                {"name": "æ±‰è°Ÿæ‹‰æ¯”æ³•å…¸", "year": "çº¦å…¬å…ƒå‰1750å¹´", "location": "å·´æ¯”ä¼¦"}
                            ]
                        }
                    ]
                },
                {
                    "id": "period_modern_world",
                    "name": "è¿‘ä»£ä¸–ç•Œ",
                    "timeRange": "15ä¸–çºª-20ä¸–çºªåˆ",
                    "chapters": [
                        {
                            "id": "chapter_new_routes",
                            "name": "ç¬¬6è¯¾ å…¨çƒèˆªè·¯çš„å¼€è¾Ÿ",
                            "keywords": ["æ–°èˆªè·¯å¼€è¾Ÿ", "å“¥ä¼¦å¸ƒ", "éº¦å“²ä¼¦", "åœ°ç†å¤§å‘ç°"],
                            "events": [
                                {"name": "å“¥ä¼¦å¸ƒå‘ç°ç¾æ´²", "year": "1492å¹´", "location": "ç¾æ´²"},
                                {"name": "éº¦å“²ä¼¦ç¯çƒèˆªè¡Œ", "year": "1519å¹´", "location": "å…¨çƒ"}
                            ]
                        },
                        {
                            "id": "chapter_enlightenment",
                            "name": "ç¬¬8è¯¾ æ¬§æ´²çš„æ€æƒ³è§£æ”¾è¿åŠ¨",
                            "keywords": ["æ–‡è‰ºå¤å…´", "å®—æ•™æ”¹é©", "å¯è’™è¿åŠ¨"],
                            "events": [
                                {"name": "æ–‡è‰ºå¤å…´", "year": "14ä¸–çºª", "location": "æ„å¤§åˆ©"}
                            ]
                        },
                        {
                            "id": "chapter_bourgeois_revolution",
                            "name": "ç¬¬9è¯¾ èµ„äº§é˜¶çº§é©å‘½ä¸èµ„æœ¬ä¸»ä¹‰åˆ¶åº¦çš„ç¡®ç«‹",
                            "keywords": ["è‹±å›½èµ„äº§é˜¶çº§é©å‘½", "ç¾å›½ç‹¬ç«‹æˆ˜äº‰", "æ³•å›½å¤§é©å‘½"],
                            "events": [
                                {"name": "è‹±å›½å…‰è£é©å‘½", "year": "1688å¹´", "location": "è‹±å›½"},
                                {"name": "ç¾å›½ç‹¬ç«‹", "year": "1776å¹´", "location": "åŒ—ç¾"},
                                {"name": "æ³•å›½å¤§é©å‘½", "year": "1789å¹´", "location": "æ³•å›½"}
                            ]
                        },
                        {
                            "id": "chapter_industrial_revolution",
                            "name": "ç¬¬10è¯¾ å½±å“ä¸–ç•Œçš„å·¥ä¸šé©å‘½",
                            "keywords": ["ç¬¬ä¸€æ¬¡å·¥ä¸šé©å‘½", "ç¬¬äºŒæ¬¡å·¥ä¸šé©å‘½", "è’¸æ±½æœº", "ç”µæ°”æ—¶ä»£"],
                            "events": [
                                {"name": "è’¸æ±½æœºå‘æ˜", "year": "1769å¹´", "location": "è‹±å›½"},
                                {"name": "ç¬¬äºŒæ¬¡å·¥ä¸šé©å‘½", "year": "19ä¸–çºª70å¹´ä»£", "location": "æ¬§ç¾"}
                            ]
                        }
                    ]
                },
                {
                    "id": "period_contemporary_world",
                    "name": "å½“ä»£ä¸–ç•Œ",
                    "timeRange": "20ä¸–çºªè‡³ä»Š",
                    "chapters": [
                        {
                            "id": "chapter_world_wars",
                            "name": "ç¬¬14ã€17è¯¾ ä¸¤æ¬¡ä¸–ç•Œå¤§æˆ˜",
                            "keywords": ["ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ˜", "ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜", "å‡¡å°”èµ›æ¡çº¦", "è”åˆå›½"],
                            "events": [
                                {"name": "ä¸€æˆ˜çˆ†å‘", "year": "1914å¹´", "location": "æ¬§æ´²"},
                                {"name": "äºŒæˆ˜çˆ†å‘", "year": "1939å¹´", "location": "æ¬§æ´²"},
                                {"name": "äºŒæˆ˜ç»“æŸ", "year": "1945å¹´", "location": "å…¨çƒ"}
                            ]
                        },
                        {
                            "id": "chapter_cold_war",
                            "name": "ç¬¬18è¯¾ å†·æˆ˜ä¸å›½é™…æ ¼å±€çš„æ¼”å˜",
                            "keywords": ["å†·æˆ˜", "ä¸¤ææ ¼å±€", "è‹è”è§£ä½“", "ä¸–ç•Œå¤šæåŒ–"],
                            "events": [
                                {"name": "å†·æˆ˜å¼€å§‹", "year": "1947å¹´", "location": "å…¨çƒ"},
                                {"name": "è‹è”è§£ä½“", "year": "1991å¹´", "location": "è‹è”"}
                            ]
                        },
                        {
                            "id": "chapter_globalization",
                            "name": "ç¬¬22è¯¾ ä¸–ç•Œå¤šæåŒ–ä¸ç»æµå…¨çƒåŒ–",
                            "keywords": ["ä¸–ç•Œå¤šæåŒ–", "ç»æµå…¨çƒåŒ–", "åŒºåŸŸä¸€ä½“åŒ–", "ä¿¡æ¯æŠ€æœ¯é©å‘½"],
                            "events": [
                                {"name": "æ¬§ç›Ÿæˆç«‹", "year": "1993å¹´", "location": "æ¬§æ´²"},
                                {"name": "WTOæˆç«‹", "year": "1995å¹´", "location": "å…¨çƒ"}
                            ]
                        }
                    ]
                }
            ]
        }
    ],
    "abilities": [
        {
            "id": "ability_chronology",
            "name": "æ—¶åºè§‚å¿µ",
            "description": "ç†è§£å†å²äº‹ä»¶çš„æ—¶é—´é¡ºåºå’Œå› æœå…³ç³»",
            "icon": "â°"
        },
        {
            "id": "ability_spatial",
            "name": "æ—¶ç©ºè§‚å¿µ",
            "description": "ç†è§£å†å²äº‹ä»¶çš„æ—¶é—´ã€åœ°ç‚¹å’Œç©ºé—´å…³ç³»",
            "icon": "ğŸ—ºï¸"
        },
        {
            "id": "ability_material_analysis",
            "name": "å²æ–™åˆ†æ",
            "description": "ä»å²æ–™ä¸­æå–ä¿¡æ¯ã€è¾¨åˆ«çœŸä¼ªã€åˆ†æè§‚ç‚¹",
            "icon": "ğŸ“–"
        },
        {
            "id": "ability_historical_interpretation",
            "name": "å†å²è§£é‡Š",
            "description": "è¿ç”¨å²å­¦æ–¹æ³•è§£é‡Šå†å²ç°è±¡å’Œé—®é¢˜",
            "icon": "ğŸ’­"
        },
        {
            "id": "ability_home_country_feelings",
            "name": "å®¶å›½æƒ…æ€€",
            "description": "ç†è§£å†å²å‘å±•è§„å¾‹ï¼ŒåŸ¹å…»çˆ±å›½ä¸»ä¹‰æƒ…æ„Ÿ",
            "icon": "ğŸ‡¨ğŸ‡³"
        }
    ]
}


def get_all_chapters():
    """è·å–æ‰€æœ‰ç« èŠ‚åˆ—è¡¨"""
    chapters = []
    for module in HISTORY_KNOWLEDGE_GRAPH['modules']:
        for period in module['periods']:
            for chapter in period['chapters']:
                chapters.append({
                    'id': chapter['id'],
                    'name': chapter['name'],
                    'module': module['name'],
                    'period': period['name'],
                    'keywords': chapter['keywords'],
                    'events': chapter.get('events', [])
                })
    return chapters


def get_all_events():
    """è·å–æ‰€æœ‰å†å²äº‹ä»¶åˆ—è¡¨ï¼ˆç”¨äºæ—¶é—´è½´å±•ç¤ºï¼‰"""
    events = []
    for module in HISTORY_KNOWLEDGE_GRAPH['modules']:
        for period in module['periods']:
            for chapter in period['chapters']:
                for event in chapter.get('events', []):
                    events.append({
                        **event,
                        'chapter': chapter['name'],
                        'module': module['name'],
                        'period': period['name']
                    })
    # æŒ‰å¹´ä»½æ’åº
    events.sort(key=lambda x: x.get('year', ''))
    return events


def search_knowledge_by_keyword(keyword):
    """æ ¹æ®å…³é”®è¯æœç´¢çŸ¥è¯†ç‚¹"""
    results = []
    keyword = keyword.lower()
    
    for module in HISTORY_KNOWLEDGE_GRAPH['modules']:
        for period in module['periods']:
            for chapter in period['chapters']:
                # æœç´¢ç« èŠ‚åç§°
                if keyword in chapter['name'].lower():
                    results.append(chapter)
                    continue
                
                # æœç´¢å…³é”®è¯
                for kw in chapter['keywords']:
                    if keyword in kw.lower():
                        results.append(chapter)
                        break
                
                # æœç´¢äº‹ä»¶
                for event in chapter.get('events', []):
                    if keyword in event['name'].lower():
                        results.append(chapter)
                        break
    
    return results
