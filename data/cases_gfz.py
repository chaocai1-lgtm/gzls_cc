"""
高分子物理案例库
基于《高分子物理（第五版）》教材内容设计
"""

CASES_GFZ = [
    {
        "id": "GFZ_C001",
        "title": "聚乙烯结晶行为的研究与应用",
        "category": "结晶与形态",
        "difficulty": 3,
        "related_chapters": ["第2章", "第5章"],
        "related_kps": ["kp_2_1_3", "kp_5_4_1", "kp_5_4_2"],
        "content": """
**案例背景**
某塑料制品公司生产聚乙烯（PE）薄膜，发现不同批次产品的力学性能存在较大差异。技术部门通过分析发现，问题的关键在于结晶度和结晶形态的控制。

**问题描述**
1. 相同分子量的PE原料，在不同冷却速率下制备的薄膜，其拉伸强度差异可达30%
2. 慢速冷却（5℃/min）制备的薄膜：高强度、高模量、较脆
3. 快速冷却（50℃/min）制备的薄膜：低强度、低模量、柔韧性好
4. 需要找到最佳的加工条件以平衡强度和韧性

**相关理论**
- 聚合物的结晶过程包括成核和生长两个阶段
- 冷却速率影响结晶度和晶粒尺寸
- 结晶形态（球晶、片晶）影响材料的宏观性能
- 结晶动力学方程（Avrami方程）可预测结晶过程

**分析要点**
1. 为什么冷却速率会影响PE的结晶度？
2. 结晶度与力学性能的关系是什么？
3. 如何通过DSC测试确定最佳加工温度？
4. 如何平衡结晶度与韧性？

**解决方案**
采用分步冷却工艺：先快速冷却到120℃抑制大球晶形成，然后缓慢冷却到室温使结晶充分进行，既保证了结晶度又避免了脆性。
""",
        "questions": [
            "计算不同冷却速率下PE的结晶度",
            "解释结晶形态对力学性能的影响机理",
            "设计优化的冷却工艺参数",
            "分析DSC曲线确定熔点和结晶温度"
        ],
        "knowledge_points": [
            "结晶动力学",
            "结晶形态",
            "DSC热分析",
            "结晶度测定"
        ]
    },
    {
        "id": "GFZ_C002",
        "title": "橡胶交联密度对弹性性能的影响",
        "category": "橡胶弹性",
        "difficulty": 4,
        "related_chapters": ["第6章"],
        "related_kps": ["kp_6_3_1", "kp_6_5_1", "kp_6_5_2"],
        "content": """
**案例背景**
某轮胎制造企业在开发新型高性能轮胎时，发现橡胶的交联密度对轮胎的弹性、耐磨性和滚动阻力有显著影响。

**问题描述**
1. 低交联密度（Mc=5000）：弹性好，但强度不足，容易变形
2. 高交联密度（Mc=1000）：强度高，但过于硬脆，舒适性差
3. 需要确定最佳交联密度以平衡性能
4. 溶胀法测定的交联密度与力学性能的关联性需要验证

**相关理论**
- 橡胶弹性的统计理论（高斯链模型）
- 交联网络的幻象网络理论
- 溶胀平衡理论（Flory-Rehner方程）
- 应力-应变关系（Mooney-Rivlin方程）

**实验数据**
不同硫化时间下的交联密度和力学性能：
- 10min: Mc=8000, 拉伸强度15MPa, 断裂伸长率600%
- 20min: Mc=3000, 拉伸强度22MPa, 断裂伸长率450%
- 30min: Mc=1500, 拉伸强度25MPa, 断裂伸长率300%

**分析要点**
1. 交联密度如何影响橡胶的弹性模量？
2. 为什么过高的交联密度会导致脆性增加？
3. 如何通过溶胀实验测定交联密度？
4. 最佳硫化条件的确定依据是什么？

**解决方案**
采用20分钟硫化时间，使Mc≈3000，既保证了足够的强度，又保持了良好的弹性和耐疲劳性能。
""",
        "questions": [
            "用统计理论计算不同交联密度下的弹性模量",
            "设计溶胀实验测定交联密度",
            "分析应力-应变曲线确定最佳配方",
            "解释交联密度与滞后损失的关系"
        ],
        "knowledge_points": [
            "橡胶弹性统计理论",
            "交联网络",
            "溶胀平衡",
            "力学性能测试"
        ]
    },
    {
        "id": "GFZ_C003",
        "title": "聚合物玻璃化转变温度的调控",
        "category": "分子运动与转变",
        "difficulty": 3,
        "related_chapters": ["第5章"],
        "related_kps": ["kp_5_3_1", "kp_5_3_2", "kp_5_3_3"],
        "content": """
**案例背景**
某电子封装材料公司需要开发Tg在150-180℃范围内的环氧树脂，以满足高温电子器件的使用要求。现有产品Tg仅为120℃，不能满足需求。

**问题描述**
1. 提高Tg的途径有哪些？
2. 如何在保证Tg的同时维持良好的加工性能？
3. 交联密度、侧基结构、主链刚性如何影响Tg？
4. 如何准确测定和表征Tg？

**相关理论**
- 玻璃化转变的自由体积理论
- WLF方程和Tg的预测
- 结构因素对Tg的影响（主链刚性、侧基、交联）
- DSC、DMA等测试方法

**设计方案**
方案A：增加交联密度（Tg提升但变脆）
方案B：引入刚性芳环结构（Tg显著提升，加工困难）
方案C：共聚改性（平衡性能）

**实验结果**
- 纯环氧树脂：Tg = 120℃
- 高交联度：Tg = 165℃，但脆性增加
- 引入联苯结构：Tg = 175℃，黏度过高
- 双酚F/双酚A共聚：Tg = 160℃，性能平衡

**分析要点**
1. 从分子运动角度解释Tg的本质
2. 不同因素对Tg的影响机理
3. DSC和DMA测试结果的对比分析
4. 如何预测改性后的Tg值？

**解决方案**
采用双酚F和双酚A按6:4比例共聚，配合适当的固化剂，使Tg达到160℃，同时保持合理的加工性能。
""",
        "questions": [
            "用自由体积理论解释Tg的影响因素",
            "分析DSC曲线确定Tg",
            "计算共聚物的Tg（Fox方程）",
            "设计实验方案提高Tg"
        ],
        "knowledge_points": [
            "玻璃化转变理论",
            "Tg的影响因素",
            "热分析技术",
            "共聚物设计"
        ]
    },
    {
        "id": "GFZ_C004",
        "title": "聚合物溶液的相分离行为",
        "category": "高分子溶液",
        "difficulty": 4,
        "related_chapters": ["第3章"],
        "related_kps": ["kp_3_2_1", "kp_3_3_2", "kp_3_4_1"],
        "content": """
**案例背景**
某公司在制备聚苯乙烯（PS）多孔膜时，采用热致相分离（TIPS）法。需要精确控制相分离温度和相分离机理，以获得特定孔径分布的膜材料。

**问题描述**
1. PS/环己烷体系在34℃附近发生相分离
2. 冷却速率影响相分离类型（亚稳分解vs旋节分解）
3. 不同相分离机理导致不同的孔结构
4. 需要确定最佳工艺参数

**相关理论**
- Flory-Huggins溶液理论
- 相图和临界点
- 旋节分解和成核-生长机理
- Cahn-Hilliard方程

**实验现象**
- 快速冷却（>10℃/min）：形成海绵状结构（旋节分解）
- 慢速冷却（<2℃/min）：形成球状孔结构（成核-生长）
- 浓度15wt%：孔径0.5-2μm
- 浓度25wt%：孔径0.1-0.5μm

**分析要点**
1. 如何绘制和分析PS/环己烷的相图？
2. 旋节分解和成核-生长的判据是什么？
3. 浓度和温度如何影响相分离？
4. 如何通过相分离动力学预测孔结构？

**解决方案**
采用浓度20wt%、冷却速率5℃/min的工艺，进入亚稳区发生成核-生长，形成孔径分布窄、均匀的多孔结构。
""",
        "questions": [
            "计算χ参数并绘制相图",
            "判断相分离机理类型",
            "分析冷却速率对孔结构的影响",
            "设计不同孔径的制备工艺"
        ],
        "knowledge_points": [
            "Flory-Huggins理论",
            "相分离热力学",
            "相分离动力学",
            "多孔材料制备"
        ]
    },
    {
        "id": "GFZ_C005",
        "title": "聚合物熔体流变性能与加工",
        "category": "流变性能",
        "difficulty": 4,
        "related_chapters": ["第9章"],
        "related_kps": ["kp_9_2_1", "kp_9_2_2", "kp_9_4_3"],
        "content": """
**案例背景**
某注塑成型厂在加工聚丙烯（PP）制品时，发现不同分子量的PP在加工性能上差异显著，需要优化加工参数以提高产品质量和生产效率。

**问题描述**
1. 低分子量PP（Mw=15万）：流动性好但制品强度不足
2. 高分子量PP（Mw=40万）：强度高但充模困难，易产生熔接痕
3. 剪切速率对黏度的影响显著（剪切变稀）
4. 挤出物膨胀导致尺寸精度问题

**相关理论**
- 非牛顿流体的流动特性
- 幂律方程和表观黏度
- 法向应力效应和挤出物膨胀
- 零切黏度与分子量的关系（η0∝M^3.4）

**实验数据**
熔体流动速率（MFR）与分子量关系：
- Mw=15万：MFR=35 g/10min，强度18MPa
- Mw=25万：MFR=8 g/10min，强度25MPa
- Mw=40万：MFR=2 g/10min，强度32MPa

**分析要点**
1. 为什么高分子量聚合物表现出更强的剪切变稀行为？
2. 法向应力效应如何影响挤出物膨胀？
3. 如何根据流变曲线优化注塑参数？
4. 分子量分布对加工性能的影响？

**解决方案**
选用Mw=25万的PP，在190℃、剪切速率100s^-1条件下加工，平衡了流动性和力学性能。通过增加保压时间降低挤出物膨胀。
""",
        "questions": [
            "测定并分析流变曲线",
            "计算不同剪切速率下的表观黏度",
            "解释挤出物膨胀现象",
            "优化注塑工艺参数"
        ],
        "knowledge_points": [
            "非牛顿流体",
            "熔体流变学",
            "弹性效应",
            "聚合物加工"
        ]
    },
    {
        "id": "GFZ_C006",
        "title": "聚合物共混物的相容性研究",
        "category": "多组分聚合物",
        "difficulty": 3,
        "related_chapters": ["第2章", "第3章"],
        "related_kps": ["kp_2_5_2", "kp_3_4_1", "kp_3_4_2"],
        "content": """
**案例背景**
某材料公司希望通过共混改性提高聚苯乙烯（PS）的韧性，考虑加入聚丁二烯橡胶（PB）。但PS和PB相容性差，直接共混效果不理想。

**问题描述**
1. PS/PB共混物发生明显的相分离
2. 两相界面结合弱，冲击强度提升有限
3. 需要判断相容性并设计增容方案
4. 如何表征共混物的形态和性能？

**相关理论**
- 共混物相容性判据（ΔGm<0）
- Flory-Huggins参数χ
- 界面张力理论
- 增容剂的作用机理

**实验结果**
- PS/PB（80/20）直接共混：χ=0.15（不相容），冲击强度提升30%
- 添加5% SBS增容剂：界面模糊，冲击强度提升200%
- 添加苯乙烯-马来酸酐共聚物：反应性增容，性能最优

**分析要点**
1. 如何判断两种聚合物是否相容？
2. 为什么SBS可以作为PS/PB的增容剂？
3. 如何通过DSC、DMA判断相容性？
4. 反应性增容与物理增容的区别？

**解决方案**
采用苯乙烯-马来酸酐共聚物作为反应性增容剂，与PB在共混过程中发生化学反应，形成接枝共聚物，显著改善界面结合。
""",
        "questions": [
            "计算PS/PB体系的χ参数",
            "设计增容剂并解释作用机理",
            "分析DSC曲线判断相容性",
            "优化共混配方和工艺"
        ],
        "knowledge_points": [
            "共混物相容性",
            "界面理论",
            "增容技术",
            "形态表征"
        ]
    },
    {
        "id": "GFZ_C007",
        "title": "聚合物的黏弹性与阻尼材料设计",
        "category": "黏弹性",
        "difficulty": 4,
        "related_chapters": ["第7章"],
        "related_kps": ["kp_7_1_3", "kp_7_2_1", "kp_7_3_1"],
        "content": """
**案例背景**
某汽车公司需要开发减振降噪材料，要求在常温（20-30℃）下具有高阻尼性能（tanδ>0.5），同时保持一定的力学强度。

**问题描述**
1. 纯橡胶：阻尼高但强度低
2. 纯塑料：强度高但阻尼低
3. 需要设计在目标温度范围内具有高阻尼的材料
4. 如何拓宽阻尼峰的温度范围？

**相关理论**
- 黏弹性的力学模型（Maxwell、Kelvin-Voigt）
- 松弛时间谱和阻尼性能
- 时温等效原理和WLF方程
- 动态力学性能（E', E'', tanδ）

**设计思路**
方案A：共混不同Tg的聚合物，拓宽阻尼峰
方案B：嵌段共聚物，利用相分离产生多个松弛
方案C：IPN（互穿聚合物网络），兼顾阻尼和强度

**实验数据**
- 纯丁基橡胶（IIR）：Tg=-70℃，tanδmax=2.5（-70℃）
- 纯聚氨酯（PU）：Tg=25℃，tanδmax=0.8（25℃）
- IIR/PU IPN：20-40℃范围内tanδ>0.6，强度15MPa

**分析要点**
1. 为什么Tg附近出现阻尼峰？
2. 如何利用时温等效原理预测不同温度下的性能？
3. IPN如何兼顾阻尼和强度？
4. 如何优化配方拓宽阻尼温度范围？

**解决方案**
采用IIR/PU IPN结构，通过控制两相比例（60/40），使阻尼峰拓宽到20-40℃，同时保持强度>15MPa。
""",
        "questions": [
            "分析DMA曲线确定阻尼性能",
            "用WLF方程进行时温叠加",
            "设计不同温度下的阻尼材料",
            "解释IPN的增强增韧机理"
        ],
        "knowledge_points": [
            "黏弹性理论",
            "动态力学分析",
            "时温等效",
            "阻尼材料"
        ]
    },
    {
        "id": "GFZ_C008",
        "title": "导电聚合物的制备与应用",
        "category": "电学性能",
        "difficulty": 5,
        "related_chapters": ["第10章"],
        "related_kps": ["kp_10_2_2", "kp_10_2_3", "kp_10_2_4"],
        "content": """
**案例背景**
某新能源企业开发柔性太阳能电池，需要高导电性、柔韧性好的透明电极材料。考虑使用导电聚合物PEDOT:PSS替代传统的ITO。

**问题描述**
1. PEDOT:PSS的电导率（~1 S/cm）远低于ITO（~10^4 S/cm）
2. 需要提高电导率至少到100 S/cm以上
3. 同时要保持透明度>85%和柔韧性
4. 稳定性（抗氧化、抗湿热）需要改善

**相关理论**
- 共轭聚合物的导电机理（极化子、双极化子）
- 掺杂对导电性的影响
- 能带结构和载流子迁移率
- 电导率的测量方法

**改性方案**
方案A：二次掺杂（添加DMSO、EG等）
方案B：酸处理（H2SO4）改善PEDOT/PSS相分离
方案C：添加导电填料（石墨烯、碳纳米管）
方案D：优化制备工艺（退火温度、成膜条件）

**实验结果**
- 纯PEDOT:PSS：σ=0.8 S/cm，透明度88%
- +5% DMSO：σ=120 S/cm，透明度86%
- +硫酸处理：σ=1500 S/cm，透明度85%
- +0.5% 石墨烯：σ=800 S/cm，透明度80%

**分析要点**
1. 共轭聚合物的导电机理是什么？
2. 为什么二次掺杂可以大幅提高电导率？
3. 如何平衡电导率和透明度？
4. 柔性电极的稳定性如何评价？

**解决方案**
采用DMSO二次掺杂结合适度硫酸处理，使电导率达到300 S/cm，透明度保持85%，满足柔性太阳能电池的要求。
""",
        "questions": [
            "解释共轭聚合物的导电机理",
            "分析掺杂对能带结构的影响",
            "设计提高电导率的改性方案",
            "评价导电聚合物的综合性能"
        ],
        "knowledge_points": [
            "导电聚合物",
            "共轭体系",
            "掺杂理论",
            "光电性能"
        ]
    },
    {
        "id": "GFZ_C009",
        "title": "聚合物的增韧改性",
        "category": "屈服与断裂",
        "difficulty": 4,
        "related_chapters": ["第8章"],
        "related_kps": ["kp_8_1_5", "kp_8_2_6"],
        "content": """
**案例背景**
某家电企业生产的聚苯乙烯（PS）外壳脆性大，在低温或冲击条件下易开裂。需要通过增韧改性提高其抗冲击性能。

**问题描述**
1. 纯PS的缺口冲击强度仅2 kJ/m²
2. 要求提高到15 kJ/m²以上
3. 同时要保持良好的刚性和加工性能
4. 需要理解增韧机理以优化配方

**相关理论**
- 银纹增韧和剪切带增韧
- 橡胶粒子的空洞化机理
- 基体的屈服和塑性变形
- 临界粒径和粒间距理论

**增韧方案**
方案A：添加20% 丁二烯橡胶（制备HIPS）
方案B：添加15% 乙烯-辛烯共聚物（POE）
方案C：添加10% 核壳橡胶粒子

**实验结果**
- HIPS（20% PB）：冲击强度18 kJ/m²，拉伸强度降低25%
- PS/POE（85/15）：冲击强度22 kJ/m²，拉伸强度降低15%
- 核壳粒子（10%）：冲击强度25 kJ/m²，拉伸强度降低10%

**关键参数**
- 橡胶粒径：0.1-0.5 μm（核壳粒子）
- 粒间距：<0.3 μm（有效增韧）
- 界面结合：接枝共聚改善

**分析要点**
1. 银纹增韧和剪切带增韧的区别？
2. 为什么粒径和粒间距对增韧效果至关重要？
3. 如何通过SEM观察增韧机理？
4. 如何平衡增韧与刚性的矛盾？

**解决方案**
采用核壳结构橡胶粒子（核：交联聚丁二烯，壳：接枝PS），粒径200nm，添加量10%，实现高效增韧。
""",
        "questions": [
            "分析银纹和剪切带的形成机理",
            "计算临界粒间距",
            "观察SEM照片判断增韧机理",
            "设计增韧配方并优化"
        ],
        "knowledge_points": [
            "增韧理论",
            "银纹机理",
            "粒子尺寸效应",
            "形态-性能关系"
        ]
    },
    {
        "id": "GFZ_C010",
        "title": "聚合物液晶的取向与性能",
        "category": "液晶与取向",
        "difficulty": 5,
        "related_chapters": ["第2章"],
        "related_kps": ["kp_2_3_2", "kp_2_3_6", "kp_2_4_1"],
        "content": """
**案例背景**
某高性能纤维公司生产芳纶（Kevlar）纤维，需要通过液晶纺丝和拉伸取向获得超高强度、高模量的纤维。

**问题描述**
1. 对位芳纶在硫酸中形成液晶溶液
2. 喷丝过程中液晶畴的取向至关重要
3. 拉伸工艺影响最终的取向度和性能
4. 需要优化工艺参数达到最佳性能

**相关理论**
- 液晶的形成条件和类型（溶致、热致）
- 液晶畴的取向机理
- 取向度的测定（双折射、X射线衍射）
- 取向与力学性能的关系

**工艺流程**
1. 溶液制备：20% 芳纶/硫酸，形成向列相液晶
2. 液晶纺丝：剪切场诱导液晶畴取向
3. 凝固拉伸：水浴中凝固并拉伸（拉伸比5-10倍）
4. 热处理：300℃下进一步提高取向度

**性能数据**
- 低拉伸比（3倍）：取向度60%，强度2.5 GPa，模量80 GPa
- 中拉伸比（7倍）：取向度85%，强度3.5 GPa，模量130 GPa
- 高拉伸比（10倍）：取向度95%，强度4.0 GPa，模量180 GPa

**分析要点**
1. 为什么芳纶能形成液晶？
2. 剪切场和拉伸场如何诱导取向？
3. 取向度与力学性能的定量关系？
4. 如何通过XRD测定取向度？

**解决方案**
采用拉伸比8倍、热处理温度280℃的工艺，使取向度达到90%，获得强度3.8 GPa、模量160 GPa的高性能纤维。
""",
        "questions": [
            "解释液晶的形成机理",
            "分析取向过程和影响因素",
            "测定并计算取向度",
            "优化纺丝工艺参数"
        ],
        "knowledge_points": [
            "聚合物液晶",
            "取向机理",
            "液晶纺丝",
            "高性能纤维"
        ]
    }
]

def get_cases():
    """返回所有案例"""
    return CASES_GFZ

def get_case_by_id(case_id):
    """根据ID获取案例"""
    for case in CASES_GFZ:
        if case["id"] == case_id:
            return case
    return None

def get_cases_by_category(category):
    """根据类别获取案例"""
    return [case for case in CASES_GFZ if case["category"] == category]

def get_cases_by_difficulty(difficulty):
    """根据难度获取案例"""
    return [case for case in CASES_GFZ if case["difficulty"] == difficulty]

def get_all_categories():
    """获取所有案例类别"""
    return list(set(case["category"] for case in CASES_GFZ))
